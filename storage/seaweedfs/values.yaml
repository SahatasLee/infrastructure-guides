image:
  registry: docker.io
  tag: "3.59"

master:
  enabled: true
  replicas: 3
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  
  # Persistence - Migrated to v4 structure
  data:
    type: "persistentVolumeClaim"
    size: 4Gi
    storageClass: "vks-storage-policy-latebinding"
  
  # Log Persistence - Fix hostPath violation
  logs:
    type: "emptyDir"

  # Security Contexts - Migrated to v4 structure (requires enabled: true)
  podSecurityContext:
    enabled: true
    runAsNonRoot: true
    runAsUser: 1001
    runAsGroup: 1001
    fsGroup: 1001
    seccompProfile:
      type: RuntimeDefault
  
  containerSecurityContext:
    enabled: true
    allowPrivilegeEscalation: false
    capabilities:
      drop: ["ALL"]
    runAsNonRoot: true

volume:
  enabled: true
  replicas: 3
  # old 'dir' is likely invalid now, using dataDirs
  
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 2000m
      memory: 4Gi
  
  # Persistence - Migrated to v4 structure
  dataDirs:
    - name: data
      type: "persistentVolumeClaim"
      size: 10Gi
      storageClass: "vks-storage-policy-latebinding"
      maxVolumes: 100

  # Logs
  logs:
    type: "emptyDir"

  # Security
  podSecurityContext:
    enabled: true
    runAsNonRoot: true
    runAsUser: 1001
    runAsGroup: 1001
    fsGroup: 1001
    seccompProfile:
      type: RuntimeDefault
  
  containerSecurityContext:
    enabled: true
    allowPrivilegeEscalation: false
    capabilities:
      drop: ["ALL"]
    runAsNonRoot: true

filer:
  enabled: true
  replicas: 2
  s3:
    enabled: true
    enableAuth: true
    # existingConfigSecret: my-s3-secret
    
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 4Gi
      
  # Persistence - Migrated to v4 structure
  data:
    type: "persistentVolumeClaim"
    size: 10Gi
    storageClass: "vks-storage-policy-latebinding"
  
  logs:
    type: "emptyDir"

  # Security
  podSecurityContext:
    enabled: true
    runAsNonRoot: true
    runAsUser: 1001
    runAsGroup: 1001
    fsGroup: 1001
    seccompProfile:
      type: RuntimeDefault
  
  containerSecurityContext:
    enabled: true
    allowPrivilegeEscalation: false
    capabilities:
      drop: ["ALL"]
    runAsNonRoot: true

s3:
  enabled: false
